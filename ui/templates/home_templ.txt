<script>\n\t\tdocument.addEventListener(\"DOMContentLoaded\",(e)=> {\n\t\t\tconst interestsInput = document.querySelector(\"#interests_input\")\n\t\t\tconst remove_interest_tablet = document.querySelector(\".remove_interest_tablet\")\n\t\t\tconst SEPARATOR = \"|\"\n\n\t\t\tlet showError=(error)=>{\n\t\t\t\tconst errInterests = document.querySelector(\"#interests_error\")\n\t\t\t\tconst errInterestsClassList = errInterests.classList\n\t\t\t\terrInterests.innerText = error\n\t\t\t\terrInterestsClassList.remove(\"hidden\")\n\t\t\t\terrInterestsClassList.add(\"block\")\n\t\t\t}\n\n\t\t\tlet hideError=()=> {\n\t\t\t\tconst errInterests = document.querySelector(\"#interests_error\")\n\t\t\t\tconst errInterestsClassList = errInterests.classList\n\t\t\t\terrInterests.innerText = \"\"\n\t\t\t\terrInterestsClassList.add(\"hidden\")\n\t\t\t\terrInterestsClassList.remove(\"block\")\n\t\t\t}\n\n\t\t\tlet updateValues = () => {\n\t\t\t\tconst interestsVideo = document.querySelector(\"#interests_video\")\n\t\t\t\tconst interestsText = document.querySelector(\"#interests_text\")\n\t\t\t\tconst interest_tablets = document.querySelector(\"#interest_tablets\")\n\n\t\t\t\tlet interests = []\t\n\t\t\t\tinterest_tablets.childNodes.forEach(node => {\n\t\t\t\t\tlet text = node.textContent\n\t\t\t\t\tif(text.length > 0) {\n\t\t\t\t\t\ttext = text.slice(0, text.length-1)\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttext = validateInterest(text)\n\t\t\t\t\t}catch(err){\n\t\t\t\t\t\tshowError(err)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tinterests.push(text)\n\t\t\t\t})\n\n\t\t\t\tinterestsVideo.value = interests.join(SEPARATOR)\n\t\t\t\tinterestsText.value = interests.join(SEPARATOR)\n\t\t\t}\n\n\t\t\tlet validateInterest = (interest) => {\n\t\t\t\tconst interest_tablets = document.querySelector(\"#interest_tablets\")\n\t\t\t\tconst errInterestsClassList = document.querySelector(\"#interests_error\").classList\n\n\t\t\t\t// check if 3<\n\t\t\t\tif (interest_tablets.childElementCount>= 3) {\n\t\t\t\t\tthrow \"maximum of only 3 interests allowed\"\n\t\t\t\t}else {\n\t\t\t\t\thideError()\n\t\t\t\t}\n\n\t\t\t\tlet newInterest = interest.trim().toLowerCase().replaceAll(SEPARATOR, \"_\")\n\t\t\t\tif(newInterest.length == 0) {\n\t\t\t\t\tthrow \"interest too short (min 1 character)\"\n\t\t\t\t}\n\n\t\t\t\tif (newInterest.length > 25) {\n\t\t\t\t\tthrow \"interest too long (max 25 characters)\"\n\t\t\t\t}\n\n\t\t\t\treturn newInterest\n\t\t\t}\n\t\t\t\n\t\t\tlet initializeInterests = () => {\n\t\t\t\tconst interest_tablets = document.querySelector(\"#interest_tablets\")\n\t\t\t\tconst interestsInput = document.querySelector(\"#interests_input\")\t\t\n\n\t\t\t\tif (interestsInput){\n\t\t\t\t\tinterestsInput.addEventListener(\"keydown\", (e) => {\n\t\t\t\t\t\tif (e.key===\"Enter\"){\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet newInterest = e.target.value\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tnewInterest = validateInterest(newInterest)\t\n\t\t\t\t\t\t\t}catch(err){\n\t\t\t\t\t\t\t\tshowError(err)\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst interestTablet = document.createElement(\"div\")\n\n\t\t\t\t\t\t\tconst interestTabletRemove = document.createElement(\"span\")\n\t\t\t\t\t\t\tinterestTabletRemove .classList.add(\"remove_interest_tablet\")\n\t\t\t\t\t\t\tinterestTabletRemove.textContent = \"x\"\n\t\n\t\t\t\t\t\t\tlet tabletStyle = \"flex justify-center items-center pl-2 h-6 bg-chatopia-2 border-l border-chatopia-3 shadow-sm shadow-chatopia-3 rounded-md\"\n\t\t\t\t\t\t\tlet tabletRemoveStyle = \"flex items-center font-bold text-md h-full ml-2 px-1 rounded-md rounded-l-none bg-red-600 text-chatopia-5 cursor-pointer\"\t\n\n\t\t\t\t\t\t\tinterestTablet.classList.add(...tabletStyle.split(\" \"))\n\t\t\t\t\t\t\tinterestTabletRemove.classList.add(...tabletRemoveStyle.split(\" \"))\n\n\t\t\t\t\t\t\tinterestTablet.textContent = newInterest\n\t\t\t\t\t\t\tinterestTablet.appendChild(interestTabletRemove)\n\n\t\t\t\t\t\t\tinterest_tablets.appendChild(interestTablet)\n\n\t\t\t\t\t\t\te.target.value = \"\"\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tupdateValues()\n\n\t\t\t\t\t\t\tinterestTabletRemove.addEventListener(\"click\", ()=>{\n\t\t\t\t\t\t\t\tinterest_tablets.removeChild(interestTablet)\n\t\t\t\t\t\t\t\tupdateValues()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst remove_interest_tablet = document.querySelectorAll(\".remove_interest_tablet\")\n\t\t\t\tremove_interest_tablet.forEach(button => {\n\t\t\t\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tconst tablet = e.target.parentElement\n\t\t\t\t\t\tif (tablet) {\n\t\t\t\t\t\t\tinterest_tablets.removeChild(tablet)\n\t\t\t\t\t\t\tupdateValues()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} // initializeInterests\n\n\t\t\tinitializeInterests()\n\n\t\t\t// Reinitialize the interests when the form is re-rendered\n\t\t\tdocument.querySelector(\"#interest_form\").addEventListener(\"htmx:afterSwap\", (e) => {\n\t\t\t\tinitializeInterests()\n\t\t\t})\n\n\t\t});\n\n\t</script>
<div class=\"pb-10 pt-20 flex flex-col lg:flex-row justify-between items-center\"><div class=\"lg:order-2\"><img class=\"max-w-lg\" src=\"/assets/logo.png\" alt=\"chatopia logo\"></div><div class=\"lg:order-1\"><h1 class=\"text-4xl lg:text-5xl py-20 font-thin\">Looking for love (or just a good laugh)? Get on <span class=\"text-chatopia-1 font-bold\">Chatopia</span>, Ethiopia's answer to boredom! </h1></div></div><div><p class=\"\">Start chatting:</p><div class=\"flex justify-start gap-2 p-2\"><form hx-post=\"/chat/video\" hx-target=\"#interest_form\"><input id=\"interests_video\" class=\"hidden\" type=\"text\" name=\"interests\"> <button class=\"rounded-md border-2 border-chatopia-1 bg-chatopia-2 text-chatopia-1 py-1 px-4 font-semibold\" type=\"submit\">Video</button></form><form hx-post=\"/chat/text\" hx-target=\"#interest_form\"><input id=\"interests_text\" class=\"hidden\" type=\"text\" name=\"interests\"> <button class=\"rounded-md border-2 border-chatopia-3 bg-chatopia-3 text-chatopia-5 py-1 px-5 font-semibold\" type=\"submit\">Text</button></form></div><div id=\"interest_form\">
</div></div>
<p>Interests (optional):</p><div class=\"flex flex-col items-start\"><div id=\"interest_tablets\" class=\"flex gap-2 py-2\">
<span class=\"flex justify-center items-center pl-2 h-6 bg-chatopia-2 border-l border-chatopia-3 shadow-sm shadow-chatopia-3 rounded-md\">
 <span class=\"flex items-center font-bold text-md h-full ml-2 px-1 rounded-md rounded-l-none bg-red-600 text-chatopia-5 cursor-pointer\">x</span></span>
</div><textarea id=\"interests_input\" class=\"border border-chatopia-3 focus:border-chatopia-1 p-2 bg-chatopia-2 resize\" placeholder=\"Enter your interests...\" maxlength=\"25\"></textarea> <span id=\"interests_error\" class=\"block text-red-600 text-sm\">
</span></div>
